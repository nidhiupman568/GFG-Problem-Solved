class LRUCache {
    private:
        struct Node {
                int key, value;
                        Node* prev;
                                Node* next;
                                        Node(int k = 0, int v = 0) : key(k), value(v), prev(nullptr), next(nullptr) {}
                                            };
                                                
                                                    int capacity;
                                                        unordered_map<int, Node*> cache;
                                                            Node* head;
                                                                Node* tail;
                                                                    
                                                                        void addToHead(Node* node) {
                                                                                node->prev = head;
                                                                                        node->next = head->next;
                                                                                                head->next->prev = node;
                                                                                                        head->next = node;
                                                                                                            }
                                                                                                                
                                                                                                                    void removeNode(Node* node) {
                                                                                                                            node->prev->next = node->next;
                                                                                                                                    node->next->prev = node->prev;
                                                                                                                                        }
                                                                                                                                            
                                                                                                                                                void moveToHead(Node* node) {
                                                                                                                                                        removeNode(node);
                                                                                                                                                                addToHead(node);
                                                                                                                                                                    }
                                                                                                                                                                        
                                                                                                                                                                            Node* removeTail() {
                                                                                                                                                                                    Node* lastNode = tail->prev;
                                                                                                                                                                                            removeNode(lastNode);
                                                                                                                                                                                                    return lastNode;
                                                                                                                                                                                                        }
                                                                                                                                                                                                            
                                                                                                                                                                                                            public:
                                                                                                                                                                                                                LRUCache(int capacity) : capacity(capacity) {
                                                                                                                                                                                                                        head = new Node();
                                                                                                                                                                                                                                tail = new Node();
                                                                                                                                                                                                                                        head->next = tail;
                                                                                                                                                                                                                                                tail->prev = head;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                            int get(int key) {
                                                                                                                                                                                                                                                                    if (cache.find(key) != cache.end()) {
                                                                                                                                                                                                                                                                                Node* node = cache[key];
                                                                                                                                                                                                                                                                                            moveToHead(node);
                                                                                                                                                                                                                                                                                                        return node->value;
                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                        return -1;
                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                    void put(int key, int value) {
                                                                                                                                                                                                                                                                                                                                            if (cache.find(key) != cache.end()) {
                                                                                                                                                                                                                                                                                                                                                        Node* node = cache[key];
                                                                                                                                                                                                                                                                                                                                                                    node->value = value;
                                                                                                                                                                                                                                                                                                                                                                                moveToHead(node);
                                                                                                                                                                                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                                                                                                                                                                                                    Node* newNode = new Node(key, value);
                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                            if (cache.size() >= capacity) {
                                                                                                                                                                                                                                                                                                                                                                                                                                            Node* tail_node = removeTail();
                                                                                                                                                                                                                                                                                                                                                                                                                                                            cache.erase(tail_node->key);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            delete tail_node;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                cache[key] = newNode;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            addToHead(newNode);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ~LRUCache() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        for (auto& pair : cache) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    delete pair.second;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    delete head;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            delete tail;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 * Your LRUCache object will be instantiated and called as such:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * LRUCache* obj = new LRUCache(capacity);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * int param_1 = obj->get(key);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    * obj->put(key,value);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */
